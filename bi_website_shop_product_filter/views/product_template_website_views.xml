<?xml version="1.0"?>
<odoo>

	<template id="assets_frontendss" inherit_id="website.assets_frontend">
		<xpath expr="script[last()]" position="after">
			<link rel="stylesheet" href="/bi_website_shop_product_filter/static/src/css/customfilter.css"/>
			<script type="text/javascript" src="/bi_website_shop_product_filter/static/src/js/filter.js"></script>
		</xpath>
	</template>

	<template id="products_filters" inherit_id="website_sale.products" active="False" customize_show="True" name="Product Filters">
		<xpath expr="//div[@id='products_grid_before']" position="before">
			<t t-set="enable_left_column" t-value="True"/>
		</xpath>
		<xpath expr="//div[@id='products_grid_before']" position="inside">
			<!-- <t t-if="grouped_tasks"> --> 
			<div class="card" style="border:0px;">
			<form class="js_filtervalue" method="get">
				<input type="hidden" name="search" t-att-value="search" />
				<ul class="nav nav-pills flex-column mt16">
					<div class="card-primary">
						<!-- <t t-if="applied_filter==True">
							<div class="customfilter">Applied Filters</div>
							<div class="container" style="display: inline-grid;">
								<t t-foreach="filters" t-as="a">
									<t t-foreach="a.filter_value_ids" t-as="v">
										<t t-if="v.id in filter_set">
											<b><span t-esc="v.name" ></span>&amp;nbsp;&amp;nbsp;</b>
										</t>
									</t>
								</t>
							</div>
							<hr/>
							<div style="height:1vh;" />
						</t> -->
						<t t-foreach="grouped_tasks" t-as="filters">
						  <h4 class="te_ctg_h4 d-none d-lg-block"><span t-field="filters[0].sudo().group_id.name"/></h4>
							<t t-foreach="filters" t-as="a">
								<li t-if="a.filter_value_ids and len(a.filter_value_ids) &gt; 0" class="nav-item" style="margin-bottom: 5px;">
									<div style="padding: 10px;">
										<strong t-field="a.name" />
									</div>
									<t t-if="a.type == 'select'">
										<select class="form-control" name="filter">
											<option value="" />
											<t t-foreach="a.filter_value_ids" t-as="v">
												
													<option t-att-value="'%s-%s' % (a.id,v.id)" t-esc="v.name" t-att-selected="v.id in filter_set" /> 
												 
											</t>
										</select>
									</t>
									<t t-if="a.type == 'radio'">
										<ul class="nav nav-pills flex-column" style="margin:5px;">
											<t t-foreach="a.filter_value_ids" t-as="v">
												<li class="nav-item" style="    margin-bottom: 5px;" >
													<label style="margin: 0 20px;" t-attf-class="nav-link#{' active' if v.id in filter_set else ''}">
														<input type="checkbox" name="filter" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in filter_set else None" />
														<span style="font-weight: normal" t-field="v.name" />
														
													</label>
												</li>
											</t>
										</ul>
									</t>
									<t t-if="a.type == 'color'" class="customcolor">
										<div style="padding: 5px 10px;">
											<t t-foreach="a.filter_value_ids" t-as="v">
											
												<label t-attf-style="background-color:#{v.html_color or v.name}" t-attf-class="css_attribute_color #{'active' if v.id in filter_set else ''}" style="margin-bottom: 5px;">
													<input type="checkbox" name="filter" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in filter_set else None" t-att-title="v.name" />
												</label>
												
											
											</t>
										</div>
									</t>
									<t t-if="a.type == 'image'" class="customcolor">
										<div style="padding: 5px 10px;">
											<t t-foreach="a.filter_value_ids" t-as="v">
												<div  t-attf-class="css_image_container #{'active' if v.id in filter_set else ''}">
												<input style="display:none" t-attf-id="check#{v.id}" type="checkbox" name="filter"  t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in filter_set else None" t-att-title="v.name" />
												<label t-attf-for="check#{v.id}" style="cursor:pointer;">
												<img t-if="v.image_128" t-att-src="image_data_uri(v.image_128)" alt="Image" t-att-title="v.name">
												
												</img>
												</label>
												</div>
											</t>
										</div>
										<div style="clear: both;"></div>
									</t>
								</li>
							</t>
						</t>
					</div>
				</ul>
			</form>
			</div>
			<!-- </t> -->
		</xpath>
		<xpath expr="//div[@id='products_grid_before']" position="attributes">
			<attribute name="class">col-lg-3 d-none d-md-block</attribute>
		</xpath>
		<xpath expr="//div[@id='products_grid']" position="attributes">
			<attribute name="class">col-lg-9</attribute>
		</xpath>
	</template>
</odoo>